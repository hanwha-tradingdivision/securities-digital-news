<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="robots" content="noindex,nofollow" />
  <title>증권·디지털 주간 뉴스</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin: 24px; line-height: 1.5; }
    .wrap { max-width: 920px; margin: 0 auto; }
    h1 { margin: 0 0 8px; }
    .meta { color: #666; margin-bottom: 20px; }
    .card { border: 1px solid #e5e5e5; border-radius: 12px; padding: 14px 16px; margin: 10px 0; }
    .title { font-weight: 700; font-size: 16px; margin: 0 0 6px; }
    .sub { color: #666; font-size: 13px; margin: 0 0 8px; }
    .desc { margin: 0; }
    a { text-decoration: none; }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>증권 · 디지털 최신 뉴스(최근 7일)</h1>
    <div class="meta" id="updated">업데이트 확인 중...</div>
    <div id="list"></div>
  </div>

<script>
async function main() {
  const res = await fetch("./news.json?ts=" + Date.now());
  const data = await res.json();

  document.getElementById("updated").textContent =
    `마지막 업데이트: ${data.generated_kst} · 키워드: ${data.query} · 기사 ${data.items.length}건`;

  const list = document.getElementById("list");
  list.innerHTML = "";

  data.items.forEach((it) => {
    const div = document.createElement("div");
    div.className = "card";
    div.innerHTML = `
      <div class="title"><a href="${it.link}" target="_blank" rel="noopener noreferrer">${escapeHtml(it.title)}</a></div>
      <div class="sub">${escapeHtml(it.source)} · ${escapeHtml(it.published_kst)}</div>
      
    `;
    list.appendChild(div);
  });
}

function escapeHtml(s) {
  return (s ?? "").replace(/[&<>"']/g, (m) => ({
    "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"
  }[m]));
}

main().catch(err => {
  document.getElementById("updated").textContent = "로딩 실패: " + err;
});
</script>
</body>
</html>
